<!doctype html>
<html>

                                              <script>
  /**************************************************
 * WELCOME to the Index
 **************************************************/
/**************************************************
 * AUSTIN TRAFFIC INCIDENTS
 * by
 * Jason Bartling
 * Ian Kelly
 * Brandon Rose
 **************************************************/
                                              </script>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">

  <script>
    /**************************************************
   * Apply MOBILE optimization metadata
   **************************************************/
  </script>

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Austin Traffic">
  <link rel="apple-touch-icon" href="./img/touch-icon-iphone.png">
  <link rel="apple-touch-icon" sizes="180x180" href="./img/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="./img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="./img/favicon-16x16.png">

  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-startup-image" href="./img/splash/launch-640x1136.png" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="./img/splash/launch-750x1294.png" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="./img/splash/launch-1242x2148.png" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="./img/splash/launch-1125x2436.png" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="./img/splash/launch-1536x2048.png" media="(min-device-width: 768px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="./img/splash/launch-1668x2224.png" media="(min-device-width: 834px) and (max-device-width: 834px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
  <link rel="apple-touch-startup-image" href="./img/splash/launch-2048x2732.png" media="(min-device-width: 1024px) and (max-device-width: 1024px) and (-webkit-min-device-pixel-ratio: 2) and (orientation: portrait)">
  <title>Austin Traffic Incidents</title>

  <script>
    /**************************************************
   * LOAD STYLESHEETS
   * Beauty, W3, ESRI, Google Fonts, Font Awesome
   **************************************************/
  </script>

  <link rel="stylesheet" href="https://js.arcgis.com/4.9/esri/css/main.css">
  <link id="pagestyle" rel="stylesheet" type="text/css" href="beauty.css">
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
  <link id="darkTheme" rel="stylesheet"> <!-- empty style to be filled with dark on JS -->

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <script>
    /**************************************************
   * LOAD JAVASCRIPT
   * Mapping, ESRI, Tippy JS
   * Animate loads at end of body
   **************************************************/
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.js"></script>
  <script src="https://js.arcgis.com/4.9/"></script>
  <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
  <script src="mapping.js"></script>
  <script src="https://unpkg.com/tippy.js@3/dist/tippy.all.min.js"></script>


</head>

<body onload="checkCookie()" id="entireApp">

  <span id="activitySpinner" class="fa fa-spinner fa-pulse"></span>

  <script>
    /**************************************************
   * Create custom widget buttons on map for
   *   settings and info
   **************************************************/
  </script>

  <div id="infoButton" class="esri-icon-description" aria-label="close icon" onclick="openOverlay()"></div>

  <div id="settingsButton" class="esri-icon-settings" aria-label="settings icon" onclick="toggleSettings()"></div>

  <div id="settingsCover" onclick="closeSettings()"></div>

  <script>
    /**************************************************
   * Create main toolbox div
   **************************************************/
  </script>

  <div id="toolBox">

    <div id="boxHeader" onclick="openOverlay()">
      <img id="lightModeLogo" src="./img/logoBlack.png" alt="awheel logo">
      <img id="darkModeLogo" src="./img/logoGrey.png" alt="awheel logo">
      <h2>Austin Traffic Incidents</h2>
      <span id="headerInfo" class="esri-icon-description" aria-label="info icon"></span>
    </div>

    <script>
      /**************************************************
     * Create tabbed MENU, assign function to click
     **************************************************/
    </script>

    <div id="boxMenu">
      <div class="w3-row">
        <a href="javascript:void(0)" onclick="openMenu(event, 'Legend')" id="legendTab">
          <div class="w3-third tablink w3-bottombar w3-hover-light-grey w3-padding">Legend</div>
        </a>
        <a href="javascript:void(0)" onclick="openMenu(event, 'Search')">
          <div class="w3-third tablink w3-bottombar w3-hover-light-grey w3-padding">Search</div>
        </a>
        <a href="javascript:void(0)" onclick="openMenu(event, 'Locate')">
          <div class="w3-third tablink w3-bottombar w3-hover-light-grey w3-padding">Locate</div>
        </a>
      </div>
    </div>

    <script>
      /**************************************************
     * Create BOXCONTENT div, assign functions to close on click
     **************************************************/
    </script>

    <div id="boxContent" style="display:none">

      <script>
        /**************************************************
       * Create LEGEND div
       **************************************************/
      </script>

      <div id="Legend" class="w3-container title">
        <span onclick="closeMenu(event, 'Legend')" class="esri-icon-up" aria-label="close icon" id="legendClose"></span>

        <br>
        <div id="esriLegend"></div>
        <input type="button" id="resetData" value="Active Incidents"><br>
        <span id="legendInfo" data-tippy="Use the legend tool for descriptions of the symbols visible on the map." class="esri-icon-description" aria-label="info icon"></span>

        <canvas id="myChart" width="400" height="400" aria-label="Incident Doughnut Chart" role="img"></canvas>




        <span id="legendSpinner" class="esri-icon-refresh" aria-label="refresh icon" onclick="refreshPage()"></span>

        <p id="locateResult"><span onclick="toggleTable()" id="bufferResults">Total:</span>

      </div>

      <script>
        /**************************************************
       * Create SEARCH div
       **************************************************/
      </script>

      <div id="Search" class="w3-container title" style="display:none">
        <span onclick="closeMenu(event, 'Search')" class="esri-icon-up" aria-label="close icon" id="searchClose"></span>
        <div id="searchOptions">
          <div id="leftSearch">
            <br>
            <label for="daysFromDate">Enter Days from Current Date:</label><br>
            <input type="text" id="daysFromDate" maxlength="3" placeholder="Between 1 and 365">
            <br>
            <br>
            <label for="incidentTypes">Select up to 5 Incident Types:</label>
            <br>
            <select id="incidentTypes" multiple></select>
          </div>
          <br>
          <div id="rightSearch">
            <span>&nbsp;&nbsp;Display:</span>
            <br>
            <form id="renderToggle">
              <label><input id="buttonPoints" type="radio" name="searchT" value="points" checked> Points &nbsp;&nbsp;</label>
              <label><input id="buttonHeatmap" type="radio" name="searchT" value="heatmap"> Heatmap<br></label>
            </form>
            <br>
            <input type="submit" id="submitButton" value="Submit"><br>


            <p>Matched Incidents: <span id="numRecords"></span></p>
          </div>
        </div>

        <span id="searchInfo" data-tippy="Use search to display locations for individual incident types, group incidents by user preference, and to generate a heat map based on the found data." class="esri-icon-description" aria-label="info icon"></span>
        <span id="searchSpinner" class="esri-icon-refresh" aria-label="refresh icon" onclick="refreshPage()"></span>
      </div>

      <script>
        /**************************************************
       * Create LOCATE div
       **************************************************/
      </script>

      <div id="Locate" class="w3-container title" style="display:none">
        <span onclick="closeMenu(event, 'Locate')" class="esri-icon-up" aria-label="close icon" id="locateClose"></span>

        <span id="searchLabel">Enter an Address:</span>
        <div id="esriLocate"></div>
        <p id="radiusOptions">
          <label for="bufferRadius">Choose Circle Radius: </label>
          <select id="bufferRadius">
            <option value=1>1 mile</option>
            <option value=2>2 miles</option>
            <option value=3>3 miles</option>
            <option value=4>4 miles</option>
          </select>
        </p>

        <span id="locateSpinner" class="esri-icon-refresh" aria-label="refresh icon" onclick="refreshPage()"></span>
        <span id="locateInfo" data-tippy="Use the locate tool to search by your current location or enter an address manually to see all incidents within a 1-mile radius." class="esri-icon-description" aria-label="info icon"></span>
        <span id="resultsLabel">View Results:</span>

        <span id="chartLabel">Chart</span>
        <span onclick="toggleTable()" class="fa fa-table" id="tableIcon"></span>
        <span id="tableLabel">Table</span>
        <span onclick="openLegend()" class="fa fa-pie-chart" id="chartIcon"></span>
      </div>
    </div>
  </div>



  <script>
    /**************************************************
     * Create full overlay, assign function to icon
     **************************************************/
  </script>

  <div id="fullOverlay" class="overlay">
    <a href="javascript:void(0)" onclick="closeOverlay()" class="esri-icon-close" aria-label="close icon" id="closeOverlay"></a>

    <div class="overlay-content">

      <script>
        /**************************************************
         * Create overlay navigation, assign functions to click
         * Switch between team info and project info
         **************************************************/
      </script>

      <div id="aboutNav">
        <button id="aboutButtons" class="buttons" onclick="teamOverlay()">About Team</button>
        <button id="aboutButtons" class="buttons" onclick="projectOverlay()">About Project</button>
      </div>

      <script>
        /**************************************************
         * Information about team members
         * Name, picture, about
         **************************************************/
      </script>

      <div id="overlayTeam">
        <div class="about">
          <h3>Jason Bartling</h3>
          <img src="./img/biojason.jpg">
          <p>
            My name is Jason Bartling, and I live in San Marcos, TX. I'm a GIS major at Texas State University.
            It's great to finally be graduating this December! Some things I enjoy are movies, music, and books.
            In my spare time I've been trying to polish up on my Python programming skills and my drone piloting ability.
          </p>
        </div>
        <div class="about">
          <h3>Ian Kelly</h3>
          <img src="./img/bioian.jpg">
          <p>
            I am a graduating senior GIS major. This is my first time coding but I enjoyed the difficult lessons and look forward to the final capstone project. I enjoy hiking and camping having recently visited Zion NP in Utah and look forward to
            an upcoming trip to Big Bend. The drone pictured was used in a UAS mapping project with Dr. Jensen.
          </p>
        </div>
        <div class="about">
          <h3>Brandon Rose</h3>
          <img src="./img/biobrandon.jpg">
          <p>
            Currently I am a Graduate Student working toward my Masters of Geography at Texas State University. I graduated from Texas State with a bachelors in GIS and a minor in Computer Science in 2017. My areas of interest are Remote
            Sensing/GIS, Geovisualisation, and Physical Geography. Like my team members I also operate sUAS’s for both mapping and as a hobby.
          </p>
        </div>
        <br>
        <br>
        <br>
      </div>

      <script>
        /**************************************************
         * Information about project
         **************************************************/
      </script>

      <div id="overlayProject">
        <h2>Austin Traffic Incidents</h2>
        <br>
        <h3 id="byLine">A project to map and visualize traffic incidents in Austin, TX</h3>
        <br>
        <br>
        <h3>Introduction</h3>
        <p>Austin is a bustling city with a diverse culinary experience, strong musical history, and plentiful outdoor opportunities in the hot sun and cool rivers. These factors help to draw new residents from other nearby cities and states to the
          growing metropolis. A report filed by the Texas Association of Realtors illustrates a comprehensive analysis of population change metrics in the state of Texas. They show that the city had a net gain of 16,890 new out-of-state residents in
          2015 (Texas Association of Realtors 2015). This strong demand puts additional pressure on the existing city infrastructure. Austin’s lack of a city rail network directs much of the commuting traffic onto the Texas roadways with a large
          volume of vehicles required to transport the growing populous.
          <br>
          <br>
          Traffic analysis is important for city officials to be able to make informed decisions about infrastructure. Two common methods of traffic analysis are travel demand modeling, estimating traffic based on housing units, and average daily
          traffic, an interpolation method to guess traffic at unknown locations (Bakiera et al. 2016). Austin Traffic Incidents proposes a third method for analysis by studying the spatial relationship of traffic incidents.
          <br>
          <br>
          With the high number of vehicles on the road, drivers will need to be more cautious as the potential for being a victim of someone else’s error increases. One way to avoid traffic incidents is to research the areas of town that
          historically show a large amount of similar types of traffic events and bypass those more dangerous areas. Austin Traffic Incidents aims to become a tool that could be used by drivers in Austin to plan their daily commute to avoid areas
          that are more prone to traffic. The City of Austin provides their traffic incident data to the public for free, but it is difficult to discern meaningful patterns without performing a spatial analysis.</p>
        <br>
        <br>
        <h3>Data and Methodology</h3>
        <p>Data for this web map will be acquired from The City of Austin’s Open Data Portal. This portal provides easy access to a wide variety of datasets provided by the City of Austin, Texas. For this project, the awheel team identified several
          potential datasets to implement and determined the Real-Time Traffic Incident Reports dataset will be used. This dataset aggregates traffic incident information from law enforcement agencies in Travis County, Texas that are reported via an
          RSS feed. The data are near-real-time, pulling new incidents from the RSS feed every 5 minutes. The data portal also provides an API (Socrata Open Data) for querying the data, therefore enabling data used in this project to be updated
          near-real-time. The fields relevant to this project will be the date and time the incident occurred (Published Date), latitude, longitude, whether the incident is active (Status), and the type of incident reported. Austin Traffic Incidents
          will create a web interface for displaying historic traffic incidents with multiple temporal scales, a query function to search by incident type, a geocoder to search by an address, and a heat map showing the areas of greatest
          concentration of incidents. A web application is ideal as it allows easy deployment to the public and easy updating of the data that drives the model. The functionalities of our project will be accomplished using the ArcGIS JavaScript API
          with traffic incident data parsed from a JavaScript object notation (JSON) data file. This is an open-standard data file format composed of attribute-value pairs that is language-independent. See Figure 1 for an approximation of user
          interface design.</p>
        <br>
        <br>
        <h3>Conclusion</h3>
        <p>The final deliverable for this project will be an interactive map of recent traffic incidents, their severity, and proximate roads around Austin. When the application first loads only active incidents will be shown, but the user will also
          be able to show more historical data over months or years and filter by traffic incident type. With this project, our team hopes to educate travelers in the Austin area to the most dangerous roads in Austin that may be previously unknown
          to the public. If we have time, we’d also like to implement route navigation from one address to another that gives an indication of how dangerous the route is overall. This is a more complex feature involving network analysis and requires
          more research, so it may have to be an additional improvement that is not completed with the core project. Because of the dynamic nature of the web map, it can be used to not only address the needs of today, but also the needs of the
          future. The City of Austin could use this visual representation of traffic incident data to explain spatial trends to stakeholders involved in the planning and implementation of infrastructure.</p>
        <br>
        <br>
        <h3>References</h3>
        <p>Bakiera, A., R. Weaver, C. Hiner, and Y. Lu. 2016. Spatial analysis of traffic congestion and transit accessibility in Austin, Texas. https://digital.library.txstate.edu/bitstream/handle/10877/6323/BAKIERA-THESIS-2016.pdf?sequence=1 (last
          accessed 29 October 2018).
          <br>
          <br>

          Texas Relocation Report. 2017. Texas Association of Realtors. https://www.texasrealestate.com/wp-content/uploads/2017TexasRelocationReport.pdf (last accessed 29 October 2018).
          <br>
          <br>
          Transportation and Mobility. https://data.austintexas.gov/Transportation-and-Mobility/Real-Time-Traffic-Incident-Reports/dx9v-zd7x (last accessed 1 November 2018).</p>
        <br>
        <br>
        <h3>Appendix</h3>
        <p>Jason Bartling: Data and Methodology, and Conclusion
          <br>
          <br>
          Ian Kelly: Introduction, References, and Proposal Design
          <br>
          <br>
          Brandon Rose: Data and Methodology, and Web Application Prototype UI
        </p>
        <br>
        <br>
        <br>
      </div>
    </div>
  </div>

  <script>
    /**************************************************
   * Create popup box to store settings
   **************************************************/
  </script>

  <div id="settingsDiv" class="box">

    <span class="esri-icon-close" id="closeSettings" onclick="closeSettings()"></span>

    <label><input type="checkbox" id="currentTraffic"> Traffic</label>
    <br>
    <label><input type="checkbox" id="darkMode" onclick="swapStyleSheet('black.css')"> Dark Mode</label>
    <br>
    <label><input type="checkbox" id="cityLimitsLayer"> City Limits</label>
    <br>
    <label><input type="checkbox" id="scaleBar"> Scalebar</label>

  </div>

  <div id="expandWidget"></div>



  <table id="table">
    <tr>
      <th>Incident</th>
      <th>#</th>

    </tr>
    <tr>
      <td>Matched in <span id="totalTable"></span> mile radius:</td>
      <td id="totalLocate"></td>

    </tr>
    <tr>
      <td></td>
      <td></td>

    </tr>
    <tr id="autoPedTab">
      <td>AUTO/ PED</td>
      <td id="totalAutoPed"></td>

    </tr>
    <tr id="blockDriveTab">
      <td>BLOCKED DRIV/ HWY</td>
      <td id="totalBlockDrive"></td>

    </tr>
    <tr id="boatCrashTab">
      <td>BOAT ACCIDENT</td>
      <td id="totalBoat"></td>

    </tr>
    <tr id="collisionTab">
      <td>COLLISION</td>
      <td id="totalCollision"></td>

    </tr>
    <tr id="privatePropertyTab">
      <td>COLLISION/PRIVATE PROPERTY</td>
      <td id="totalPrivate"></td>

    </tr>
    <tr id="collisionInjuryTab">
      <td>COLLISION WITH INJURY</td>
      <td id="totalInjury"></td>

    </tr>
    <tr id="ftsraTab">
      <td>COLLISN / FTSRA</td>
      <td id="totalFtsra"></td>

    </tr>
    <tr id="leaveSceneTab">
      <td>COLLISN/ LVNG SCN</td>
      <td id="totalLeave"></td>

    </tr>
    <tr id="crashServiceTab">
      <td>Crash Service</td>
      <td id="totalService"></td>

    </tr>
    <tr id="crashUrgentTab">
      <td>Crash Urgent</td>
      <td id="totalUrgent"></td>

    </tr>
      <tr id="fleetACCTab">
      <td>FLEET ACC/ INJURY</td>
      <td id="totalFleet"></td>

    </tr>
    <tr id="highWaterTab">
      <td>HIGH WATER</td>
      <td id="totalWater"></td>

    </tr>
    <tr id="icyRoadwayTab">
      <td>ICY ROADWAY</td>
      <td id="totalIce"></td>

    </tr>
    <tr id="looseLivestockTab">
      <td>LOOSE LIVESTOCK</td>
      <td id="totalLivestock"></td>

    </tr>
    <tr id="nHZRDTab">
      <td>N / HZRD TRFC VIOL</td>
      <td id="totalNonHzrd"></td>

    </tr>
    <tr id="trafficFatalityTab">
      <td>TRAFFIC FATALITY</td>
      <td id="totalFatal"></td>

    </tr>
    <tr id="trafficHazardTab">
      <td>Traffic Hazard</td>
      <td id="totalHazard"></td>

    </tr>
    <tr id="trafficImpedimentTab">
      <td>Traffic Impediment</td>
      <td id="totalImpediment"></td>

    </tr>
    <tr id="trafficDebrisTab">
      <td>TRFC HAZD/ DEBRIS</td>
      <td id="totalDebris"></td>

    </tr>
    <tr id="vehicleFireTab">
      <td>VEHICLE FIRE</td>
      <td id="totalFire"></td>

    </tr>
    <tr id="stalledVehicleTab">
      <td>zSTALLED VEHICLE</td>
      <td id="totalStall"></td>

    </tr>

  </table>

  <script>
    /**************************************************
     * Footer info div
     **************************************************/
  </script>

  <div id="lightFooter">&copy; awheel Intelligence 2018 <span>Texas State University</span></div>
  <div id="darkFooter">&copy; awheel Intelligence 2018 <span>Texas State University</span></div>

  <script>
    /**************************************************
     * Create view for map to load into
     **************************************************/
  </script>

  <div id="viewDiv"></div>




  <script>
    /**************************************************
     * Load animate file after HTML body built
     **************************************************/
  </script>

  <script src="animate.js"></script>

</body>

</html>
